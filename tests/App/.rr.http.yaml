version: '3'
rpc:
    listen: 'tcp://127.0.0.1:6001'

server:
    command: 'php app.php'
    env:
        - APP_RUNTIME: Roadrunner\Integration\Symfony\Http\Runtime\HttpRuntime
        - APP_ENV: prod
#        - VAR_DUMPER_FORMAT: server
#        - VAR_DUMPER_SERVER: 0.0.0.0:9912

http:
    address: '0.0.0.0:8080'
    middleware:
        - gzip
    pool:
      debug: ${RR_HTTP_WORKER_DEBUG:-false}
      num_workers: ${RR_HTTP_WORKER_COUNT:-2}
      supervisor:
        max_worker_memory: 200


logs:
  mode: ${RR_HTTP_LOG_MODE:-production}
  channels:
    rpc:
      level: info
      encoding: json
    http:
      level: info
      encoding: json
    server:
      level: info
      encoding: json


